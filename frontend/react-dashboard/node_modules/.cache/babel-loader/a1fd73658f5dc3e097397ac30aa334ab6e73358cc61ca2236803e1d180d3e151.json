{"ast":null,"code":"import React,{useState,useEffect}from'react';import Header from'./components/Header';import AnalysisForm from'./components/AnalysisForm';import ProgressIndicator from'./components/ProgressIndicator';import StatsCards from'./components/StatsCards';import ChargesChart from'./components/ChargesChart';import CasesTable from'./components/CasesTable';import{analyzeCases,pollJobStatus}from'./utils/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const LOCAL_STORAGE_KEY='doj_research_last_results';function App(){const[results,setResults]=useState([]);const[isLoading,setIsLoading]=useState(false);const[status,setStatus]=useState(null);const[progress,setProgress]=useState(null);const[error,setError]=useState(null);// Load last results from localStorage on mount\nuseEffect(()=>{const lastResults=localStorage.getItem(LOCAL_STORAGE_KEY);if(lastResults){try{const parsed=JSON.parse(lastResults);if(Array.isArray(parsed)&&parsed.length>0){setResults(parsed);setStatus('done');}}catch(e){// Ignore parse errors\n}}},[]);// Save results to localStorage after analysis\nuseEffect(()=>{if(results&&results.length>0&&status==='done'){localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(results));}},[results,status]);const handleStartAnalysis=async formData=>{setIsLoading(true);setStatus('pending');setError(null);setResults([]);setProgress(null);try{// Start the analysis\nconst response=await analyzeCases(formData);const jobId=response.job_id;if(!jobId){throw new Error('No job ID returned from server');}// Poll for results\nconst analysisResults=await pollJobStatus(jobId,jobData=>{setStatus(jobData.status);if(jobData.progress){setProgress(jobData.progress);}if(jobData.error){setError(jobData.error);}});setResults(analysisResults||[]);setStatus('done');}catch(err){console.error('Analysis failed:',err);setError(err.message);setStatus('error');}finally{setIsLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"main\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsx(AnalysisForm,{onStartAnalysis:handleStartAnalysis,isLoading:isLoading}),status&&status!=='done'&&/*#__PURE__*/_jsx(ProgressIndicator,{status:status,progress:progress,error:error}),results.length>0&&status==='done'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(StatsCards,{results:results}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-8\",children:[/*#__PURE__*/_jsx(ChargesChart,{results:results}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Analysis Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Total Cases Analyzed:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:results.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Analysis Date:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:new Date().toLocaleDateString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Analysis Time:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[\"~\",Math.ceil(results.length*0.5),\" minutes\"]})]})]})]})]}),/*#__PURE__*/_jsx(CasesTable,{results:results})]}),!isLoading&&(!status||status==='done'&&results.length===0)&&/*#__PURE__*/_jsx(\"div\",{className:\"card text-center py-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-8 h-8 text-primary-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"Ready to Analyze\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Configure your analysis parameters above and click \\\"Start Analysis\\\" to begin processing DOJ press releases.\"})]})})]})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Header","AnalysisForm","ProgressIndicator","StatsCards","ChargesChart","CasesTable","analyzeCases","pollJobStatus","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LOCAL_STORAGE_KEY","App","results","setResults","isLoading","setIsLoading","status","setStatus","progress","setProgress","error","setError","lastResults","localStorage","getItem","parsed","JSON","parse","Array","isArray","length","e","setItem","stringify","handleStartAnalysis","formData","response","jobId","job_id","Error","analysisResults","jobData","err","console","message","className","children","onStartAnalysis","Date","toLocaleDateString","Math","ceil","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d"],"sources":["/Users/aliceguo/src/doj-reseach-agent/frontend/react-dashboard/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Header from './components/Header';\nimport AnalysisForm from './components/AnalysisForm';\nimport ProgressIndicator from './components/ProgressIndicator';\nimport StatsCards from './components/StatsCards';\nimport ChargesChart from './components/ChargesChart';\nimport CasesTable from './components/CasesTable';\nimport { analyzeCases, pollJobStatus } from './utils/api';\n\nconst LOCAL_STORAGE_KEY = 'doj_research_last_results';\n\nfunction App() {\n  const [results, setResults] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [status, setStatus] = useState(null);\n  const [progress, setProgress] = useState(null);\n  const [error, setError] = useState(null);\n\n  // Load last results from localStorage on mount\n  useEffect(() => {\n    const lastResults = localStorage.getItem(LOCAL_STORAGE_KEY);\n    if (lastResults) {\n      try {\n        const parsed = JSON.parse(lastResults);\n        if (Array.isArray(parsed) && parsed.length > 0) {\n          setResults(parsed);\n          setStatus('done');\n        }\n      } catch (e) {\n        // Ignore parse errors\n      }\n    }\n  }, []);\n\n  // Save results to localStorage after analysis\n  useEffect(() => {\n    if (results && results.length > 0 && status === 'done') {\n      localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(results));\n    }\n  }, [results, status]);\n\n  const handleStartAnalysis = async (formData) => {\n    setIsLoading(true);\n    setStatus('pending');\n    setError(null);\n    setResults([]);\n    setProgress(null);\n\n    try {\n      // Start the analysis\n      const response = await analyzeCases(formData);\n      const jobId = response.job_id;\n\n      if (!jobId) {\n        throw new Error('No job ID returned from server');\n      }\n\n      // Poll for results\n      const analysisResults = await pollJobStatus(jobId, (jobData) => {\n        setStatus(jobData.status);\n        if (jobData.progress) {\n          setProgress(jobData.progress);\n        }\n        if (jobData.error) {\n          setError(jobData.error);\n        }\n      });\n\n      setResults(analysisResults || []);\n      setStatus('done');\n      \n    } catch (err) {\n      console.error('Analysis failed:', err);\n      setError(err.message);\n      setStatus('error');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Header />\n      \n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"space-y-8\">\n          {/* Analysis Form */}\n          <AnalysisForm \n            onStartAnalysis={handleStartAnalysis}\n            isLoading={isLoading}\n          />\n\n          {/* Progress Indicator */}\n          {status && status !== 'done' && (\n            <ProgressIndicator \n              status={status}\n              progress={progress}\n              error={error}\n            />\n          )}\n\n          {/* Results Section */}\n          {results.length > 0 && status === 'done' && (\n            <>\n              {/* Summary Statistics */}\n              <StatsCards results={results} />\n\n              {/* Charts */}\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n                <ChargesChart results={results} />\n                <div className=\"card\">\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Analysis Summary</h3>\n                  <div className=\"space-y-3 text-sm\">\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-600\">Total Cases Analyzed:</span>\n                      <span className=\"font-medium\">{results.length}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-600\">Analysis Date:</span>\n                      <span className=\"font-medium\">{new Date().toLocaleDateString()}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-600\">Analysis Time:</span>\n                      <span className=\"font-medium\">~{Math.ceil(results.length * 0.5)} minutes</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Cases Table */}\n              <CasesTable results={results} />\n            </>\n          )}\n\n          {/* Empty State */}\n          {!isLoading && (!status || (status === 'done' && results.length === 0)) && (\n            <div className=\"card text-center py-12\">\n              <div className=\"max-w-md mx-auto\">\n                <div className=\"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <svg className=\"w-8 h-8 text-primary-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                  </svg>\n                </div>\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Ready to Analyze</h3>\n                <p className=\"text-gray-600 mb-6\">\n                  Configure your analysis parameters above and click \"Start Analysis\" to begin processing DOJ press releases.\n                </p>\n              </div>\n            </div>\n          )}\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}